<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Malware</title>
    <link rel="stylesheet" href="./css/customstyle.css">
    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/lux/bootstrap.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600,800,900" rel="stylesheet" type="text/css">
    <!--JS-->
    <script src="./js/index.js"></script>
    <script src="./js/graphs.js"></script>
    <!--C3 Charts CSS-->
    <link rel="stylesheet" href="./css/c3.css" type="text/css">
    <!--Charts JavaScript-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
  <body>
    <br>
    <h2>Network Health</h2>

<!--Bar-->
    <div id="progress" style="width: 75%;">
        <div id="statusbar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar">1%</div>
      </div>
      <br>
      <span id="healthvalue">0%</span>
      <br>
      <div id="buttons">
        <button id="health" class="btn btn-primary" onclick="bar()">Refresh Network Health</button>
      </div>
      <br>
      <div id="status" style="margin-top: 100px">
        <h2>Network Status</h2>
        <br>
        <span id="statusvalue"></span>
        <br>
        <div id="buttons">
          <button id="status" class="btn btn-primary" onclick="online()">Check Network Status</button>
        </div>
      </div>
  </body>
</html>

<script>
  
//bar
var totalhealth = 0;
var i = 0;
var health = 0;
if (i == 0) { 
    i = 1;
    var elem = document.getElementById("statusbar");
    var width = 1;
    health = width;
    var id = setInterval(frame, 50);
    function frame() {
      if (width >= 100) {
        clearInterval(id);
        i = 0;
        width = 1;
        alert("Network Diagnosis Complete! Click the Check Status button to see the status");
      } else {
        width++;
        health = width;
        elem.style.width = width + "%";
        elem.innerHTML = width + "%";
        healthvalue.innerHTML = health + "%";
      }
    }
  }

  //button refresh
function bar(){
  
  
  var i = 0;
  var health = 0;
  if (i == 0) {
    i = 1;
    var elem = document.getElementById("statusbar");
    var width = 1;
    health = width;
    var id = setInterval(frame, 50);
    function frame() {
      if (width >= 100) {
        clearInterval(id);
        i = 0;
        width = 1;
        alert("Network Diagnosis Complete! Click the Check Status button to see the status");
        document.getElementById("health").disabled = 'false';
      } else {
        width++;
        health = width;
        elem.style.width = width + "%";
        elem.innerHTML = width + "%";
        healthvalue.innerHTML = health + "%";
        document.getElementById("health").disabled = 'true';
      }
    }
  }
}

//button status
function online(){
  document.getElementById("health").disabled = 'false';
  if(health > 80){
    statusvalue.innerHTML = "Online!";
  }
  else if(health > 20 && health <= 80){
    statusvalue.innerHTML = "Needs Maintenance!";
  }
  else{
    statusvalue.innerHTML = "Offline or in Maintanence status!";
  }
}

</script>