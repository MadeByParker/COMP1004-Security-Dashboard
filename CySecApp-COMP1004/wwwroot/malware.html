<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Malware</title>
    <link rel="stylesheet" href="./css/customstyle.css">
    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/lux/bootstrap.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600,800,900" rel="stylesheet" type="text/css">
    <body>
        <br>
        <h3>Malware Scanner</h3>
    <div id="progress" style="width: 75%;">
        <div id="statusbarMal" class="progress-bar bg-warning progress-bar-striped progress-bar-animated" role="progressbar">1%</div>
    </div>
    <br>
    <span id="scanvalue">0%</span>
    <span id="scanComplete"></span>
    <br>
    <div id="buttons">
        <button id="scan" class="btn btn-primary" onclick="rescan()">Scan for Malware</button>
    </div>
    <br>
    <h4>Distribution of Malware</h4>
    <canvas style="padding-bottom: 20px;" id="chartMal" width="200" height="50"></canvas>  
    <a href="https://www.statista.com/statistics/204434/most-frequent-malware-propagation-methods/"><strong style="font-size: 16px; margin-bottom: 10px;">Data processed from here!</strong></a>
    <div id="Userstext">
    <p>This graph shows the distribution of the leading types of malware used in cyber crime across the world in the year 2019.</p>
    <p>Check how many users connect per day.</p> <button class="btn btn-primary sm-3" style="margin-bottom: 10px;" type="button" href='#' id="Usersbtn2" onclick="UserPage()">Users!</button>
    <p>Check where they are connecting from to ensure that the logins are not controlled by the following malware</p> <button class="btn btn-primary sm-3" type="button" href='#' id="IPbtn2" onclick="IPPage()">Connections</button>
    </div>
    <br>

    <div id="netalert" class="toast" style="position: absolute; top: 150px; right: 10px; min-width: 250px; background-color: #d3d3d3;">
        <div class="toast-header" style="background-color: gray; color: white;"> 
          <strong style="font-size: 14px;" class="mr-auto">Update!</strong>
          <small>Just now</small>
        </div>
        <div class="toast-body">
          <strong><span id="text">Finished Malware Scan!</span></strong>
        </div>
      </div>
    <!--JS-->
    <script src="./js/index.js"></script>
    <script src="./js/graphs.js"></script>
    <!--Charts JavaScript-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    </body>
</html>

<script>
    
    var i = 0;
    var health = 0;
    if (i == 0) {
        i = 1;
        var elem = document.getElementById("statusbarMal");
        var width = 1;
        health = width;
        var id = setInterval(frame, 100);
        function frame() {
        if (width >= 100) {
            document.getElementById("scan").disabled = false;
            $('.toast').toast({animation: true, delay: 3000});
            $('.toast').toast('show');
            clearInterval(id);
            i = 0;
            width = 1;
            scanComplete.innerHTML = "Scan Complete!";
        } else {
            document.getElementById("scan").disabled = 'true';
            width++;
            health = width;
            elem.style.width = width + "%";
            elem.innerHTML = width + "%";
            scanvalue.innerHTML = health + "%";
            scanComplete.innerHTML = "Scan In Progress!";

            }
        }
    }
    

        
    //button refresh
    function rescan(){        

            var i = 0;
            var health = 0;
            if (i == 0) {
                i = 1;
                var elem = document.getElementById("statusbarMal");
                var width = 1;
                health = width;
                var id = setInterval(frame, 100);
                function frame() {
                if (width >= 100) {
                    document.getElementById("scan").disabled = false;
                    $('.toast').toast({animation: true, delay: 3000});
                    $('.toast').toast('show');
                    clearInterval(id);
                    i = 0;
                    width = 1;
                    scanComplete.innerHTML = "Scan Complete!";
                } else {
                    document.getElementById("scan").disabled = 'true';
                    width++;
                    health = width;
                    elem.style.width = width + "%";
                    elem.innerHTML = width + "%";
                    scanvalue.innerHTML = health + "%";
                    scanComplete.innerHTML = "Scan In Progress!";
                }
            }
        }
    }
    </script>
